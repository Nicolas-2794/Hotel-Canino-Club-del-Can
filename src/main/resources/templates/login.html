<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>Acceso · Club del Can</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
        :root{
          --bg:#F3E6D3;          /* beige de fondo */
          --paper:#FFF6EA;       /* crema de tarjetas */
          --ink:#2B1E16;         /* marrón oscuro texto */
          --muted:#6f5b4d;
          --brand:#4A3A2A;       /* acentos oscuros */
          --ok:#277a4a; --bad:#b03a2e;
          --ring:#e1d2bf;
        }

        *{box-sizing:border-box}
        html,body{height:100%}
        body{
          margin:0;
          font-family: ui-serif, Georgia, "Times New Roman", serif;
          color:var(--ink);
          background:
            radial-gradient(1200px 250px at 50% -50%, rgba(0,0,0,.08), transparent 70%),
            linear-gradient(180deg, #f7ecdb, #efdfc8 30%, #e9d4ba 60%, #ecdcc6);
          background-color:var(--bg);
        }

        /* Contenedor centrado */
        .stage{
          min-height:100vh;
          display:flex;
          align-items:center;
          justify-content:center;
          padding:40px 16px;
        }

        .card{
          width:100%;
          max-width: 420px;
          background: radial-gradient(120% 200% at 50% 0, #fff, var(--paper));
          border:1px solid rgba(70,50,30,.08);
          border-radius:20px;
          box-shadow:
            0 20px 35px rgba(61,43,28,.16),
            inset 0 1px 0 rgba(255,255,255,.7);
          padding:28px;
        }

        .brand{
          display:flex;
          align-items:center;
          justify-content:center;
          gap:12px;
          margin-bottom:18px;
          user-select:none;
        }
        .brand img{
          width:54px;height:54px;object-fit:contain;
          filter: drop-shadow(0 2px 4px rgba(0,0,0,.12));
        }
        .brand h1{
          font-size:24px; line-height:1.1; margin:0;
          letter-spacing:.4px;
        }
        .brand small{display:block; font-size:13px; color:var(--muted); margin-top:2px}

        .card h2{
          margin:8px 0 18px 0;
          font-size:22px;
          letter-spacing:.3px;
        }

        form{display:grid; gap:14px}
        label{font-weight:600; font-size:14px}
        .field{
          display:flex; flex-direction:column; gap:6px;
        }
        input[type="text"], input[type="email"], input[type="password"]{
          width:100%;
          padding:12px 14px;
          border:1px solid var(--ring);
          border-radius:12px;
          background:#fff;
          font-size:15px;
          color:var(--ink);
          outline:none;
          box-shadow: inset 0 1px 0 rgba(0,0,0,.03);
        }
        input:focus{
          border-color:#d4bfa8;
          box-shadow: 0 0 0 4px rgba(212,191,168,.25);
        }

        .btn{
          appearance:none;
          border:none;
          cursor:pointer;
          padding:12px 16px;
          border-radius:999px;
          font-weight:700;
          font-size:15px;
          letter-spacing:.2px;
          background: radial-gradient(120% 180% at 50% 0, #6f5946, #4A3A2A);
          color:#fff;
          box-shadow: 0 10px 20px rgba(74,58,42,.22);
          transition: transform .06s ease, box-shadow .06s ease, filter .2s ease;
        }
        .btn:hover{filter:brightness(1.03)}
        .btn:active{transform: translateY(1px); box-shadow: 0 6px 14px rgba(74,58,42,.24)}

        .links{
          display:flex; justify-content:space-between; align-items:center;
          gap:10px; margin-top:8px; flex-wrap:wrap;
        }
        .link{
          color:var(--brand);
          text-decoration:none; font-weight:600;
          padding:8px 12px; border:1px solid rgba(74,58,42,.15);
          border-radius:999px; background:rgba(255,255,255,.6);
        }
        .link:hover{background:#fff}

        .alert{
          margin:6px 0 2px 0; padding:10px 12px;
          border-radius:12px; font-size:14px;
          border:1px solid transparent;
        }
        .bad{ color:#fff; background:linear-gradient(180deg,#cb5144,#b03a2e); border-color:#a33429}
        .ok{ color:#0d4629; background:#e7f6ee; border-color:#c5ebda}

        /* Mini footer */
        .foot{
          margin-top:16px; text-align:center; color:var(--muted); font-size:12px;
        }
    </style>
</head>
<body>

<main class="stage">
    <section class="card">
        <div class="brand">
            <img src="/images/logo-clubdelcan.png" alt="Club del Can">
            <div>
                <h1>Club del Can</h1>
                <small>Hotel Canino</small>
            </div>
        </div>

        <h2>Acceso</h2>

        <!-- Mensajes -->
        <p class="alert bad" th:if="${param.error}">Credenciales inválidas. Revisa tu correo y contraseña.</p>
        <p class="alert ok" th:if="${param.logout}">Sesión cerrada correctamente. ¡Hasta pronto!</p>

        <form th:action="@{/login}" method="post">
            <div class="field">
                <label for="email">Usuario / E-mail</label>
                <input id="email" type="text" name="email" autocomplete="username" required />
            </div>

            <div class="field">
                <label for="password">Contraseña</label>
                <input id="password" type="password" name="password" autocomplete="current-password" required />
            </div>

            <!-- CSRF (seguro para Spring Security 6.x) -->
            <th:block th:with="csrf=${#request.getAttribute('org.springframework.security.web.csrf.CsrfToken')} ?: ${#request.getAttribute('_csrf')}"
                      th:if="${csrf != null}">
                <input type="hidden" th:name="${csrf.parameterName}" th:value="${csrf.token}" />
            </th:block>

            <button class="btn" type="submit">Ingresar</button>

            <div class="links">
                <a class="link" th:href="@{/recuperar}">Recuperar contraseña</a>
                <a class="link" th:href="@{/}">Volver al inicio</a>
            </div>
        </form>

        <p class="foot">© <span th:text="${#temporals.format(#temporals.createNow(),'yyyy')}">2025</span> Club del Can</p>
    </section>
</main>

</body>
</html>
