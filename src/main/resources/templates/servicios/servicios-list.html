<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<body>
<div th:replace="~{layout :: scaffold(~{::section})}">
    <section>
        <!-- Header + CTA -->
        <header style="display:flex;justify-content:space-between;align-items:center;margin-bottom:14px;">
            <h2 style="margin:0;display:flex;align-items:center;gap:8px;">üßæ Servicios</h2>
            <div style="display:flex;gap:10px;">
                <a th:href="@{/admin}"
                   style="text-decoration:none;padding:10px 14px;border:1px solid #bfa58c;border-radius:999px;color:#5a4635;font-weight:700;">‚Üê
                    Volver al Panel</a>
                <a th:href="@{/servicios/nuevo}"
                   style="text-decoration:none;padding:10px 14px;background:#2ecc71;color:#fff;border-radius:999px;font-weight:800;">+ Nuevo Servicio</a>
            </div>
        </header>

        <!-- Tabla -->
        <div style="overflow:auto;background:#fffaf7;border-radius:16px;box-shadow:0 2px 8px rgba(0,0,0,.08);">
            <table style="width:100%;border-collapse:separate;border-spacing:0;">
                <thead>
                <tr style="background:#fbf5ee;color:#3e2f22;">
                    <th style="text-align:left;padding:14px 16px;border-bottom:1px solid #eadfd2;">Nombre</th>
                    <th style="text-align:left;padding:14px 16px;border-bottom:1px solid #eadfd2;">Descripci√≥n</th>
                    <th style="text-align:right;padding:14px 16px;border-bottom:1px solid #eadfd2;">Precio</th>
                    <th style="text-align:left;padding:14px 16px;border-bottom:1px solid #eadfd2;">Acciones</th>
                </tr>
                </thead>

                <tbody>
                <tr th:each="s : ${servicios}" style="background:#fff;">
                    <td style="padding:14px 16px;border-bottom:1px solid #f0e8de;" th:text="${s.nombre}">Hospedaje</td>
                    <td style="padding:14px 16px;border-bottom:1px solid #f0e8de;" th:text="${s.descripcion}">Estad√≠a diaria</td>
                    <td style="padding:14px 16px;border-bottom:1px solid #f0e8de;text-align:right;"
                        th:text="${#numbers.formatDecimal(s.precio, 1, 'COMMA', 2, 'POINT')}">15.000,00</td>
                    <td style="padding:14px 16px;border-bottom:1px solid #f0e8de;">
                        <a th:href="@{|/servicios/${s.id}/editar|}"
                           style="padding:8px 12px;border:1px solid #bfa58c;border-radius:999px;color:#5a4635;text-decoration:none;font-weight:800;margin-right:8px;">
                            Editar
                        </a>

                        <form th:action="@{|/servicios/${s.id}/eliminar|}" method="post" style="display:inline;">
                            <!-- CSRF -->
                            <th:block th:with="csrf=${#request.getAttribute('org.springframework.security.web.csrf.CsrfToken')} ?: ${#request.getAttribute('_csrf')}"
                                      th:if="${csrf != null}">
                                <input type="hidden" th:name="${csrf.parameterName}" th:value="${csrf.token}"/>
                            </th:block>
                            <button type="submit" onclick="return confirm('¬øEliminar servicio?')"
                                    style="padding:8px 12px;background:#e74c3c;border:none;border-radius:999px;color:#fff;font-weight:800;cursor:pointer;">
                                Eliminar
                            </button>
                        </form>
                    </td>
                </tr>

                <tr th:if="${#lists.isEmpty(servicios)}">
                    <td colspan="4" style="padding:16px;text-align:center;color:#666;">No hay servicios registrados.</td>
                </tr>
                </tbody>
            </table>
        </div>
    </section>
</div>
</body>
</html>
